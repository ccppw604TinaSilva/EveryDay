# 初探富文本之OT协同算法
`OT`的英文全称是`Operational Transformation`，是一种处理协同编辑的算法。当前`OT`算法用的比较多的地方就是富文本编辑器领域了，常用于作为实现文档协同的底层算法，支持多个用户同时编辑文档，不会因为用户并发修改导致冲突，而导致结果不一致甚至数据丢失的问题。

## 描述
从名字就可以看出来，`OT`协同算法的重点在于操作`Operation`与转换`Transformation`，简单来说，操作`Operation`指明了所有的操作必须原子化，例如在第`N`个位置插入了某个字符，在第`M`个位置删除了某个字符，类似于这样的所有的操作必须能够原子化地表示，转换`Transformation`指明了所有的操作必须要有转换的方案，例如我在第`N`个位置插入了字符，你在`N+2`个位置同时插入了字符，假设我的操作比较靠前，由于需要同步操作，那么在我本地执行你的`Operation`时就必须将其转换，插入的位置就必须增加我插入字符的长度，这就是大概的`OT`所需要的条件，当然具体的算法要远远比这个复杂，并且存在例如同步调度、`Undo/Redo`、光标、稳定性、可溯源等等问题需要一并解决。本文不涉及具体的协同算法，只是探讨了`OT`协同算法的基本思路，当前也有比较成熟的`OT`协同框架例如`ShareDB`等，可以相对简单地接入，当然只是相对而言，成本也是不低的。在讨论具体的协同算法之前，我们探究一下为什么要有协同算法，如果没有协同算法的话会出现什么问题，以及具体会出现问题的场景。

### 乐观锁

### 悲观锁

### 自动合并

### 协同编辑

## 每日一题

```
https://github.com/WindrunnerMax/EveryDay
```

## 参考

```
https://zhuanlan.zhihu.com/p/425265438
http://www.alloyteam.com/2019/07/13659/
https://www.51cto.com/article/717595.html
https://juejin.cn/post/7137846657474887711
https://github.com/yoyoyohamapi/book-slate-editor-design
```
